<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (19) on Wed Mar 20 15:37:58 PDT 2024 -->
<title>RaftPeer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-03-20">
<meta name="description" content="declaration: package: raft, class: RaftPeer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">raft</a></div>
<h1 title="Class RaftPeer" class="title">Class RaftPeer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">raft.RaftPeer</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="RaftInterface.html" title="interface in raft">RaftInterface</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">RaftPeer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="RaftInterface.html" title="interface in raft">RaftInterface</a></span></div>
<div class="block">RaftPeer class represents a Raft peer node that interacts with others using remote calls
  -- each RaftPeer supports a Service interface to accept incoming remote calls per RaftInterface
  -- each RaftPeer holds a list of stub interfaces to request remote calls per RaftInferface
  -- all remote calls are implemented using the underlying remote object library</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="RaftPeer.State.html" class="type-name-link" title="enum class in raft">RaftPeer.State</a></code></div>
<div class="col-last even-row-color">
<div class="block">RaftPeer states</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></code></div>
<div class="col-second even-row-color"><code><a href="#alive" class="member-name-link">alive</a></code></div>
<div class="col-last even-row-color">
<div class="block">Indicates whether the Raft peer is alive and participating in the cluster.</div>
</div>
<div class="col-first odd-row-color"><code>private int</code></div>
<div class="col-second odd-row-color"><code><a href="#commitIndex" class="member-name-link">commitIndex</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The index of the highest log entry known to be committed.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></code></div>
<div class="col-second even-row-color"><code><a href="#currentTerm" class="member-name-link">currentTerm</a></code></div>
<div class="col-last even-row-color">
<div class="block">The current term of this Raft peer.</div>
</div>
<div class="col-first odd-row-color"><code>private long</code></div>
<div class="col-second odd-row-color"><code><a href="#electionStartTime" class="member-name-link">electionStartTime</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The time at which the current election started.</div>
</div>
<div class="col-first even-row-color"><code>private long</code></div>
<div class="col-second even-row-color"><code><a href="#electionTimeout" class="member-name-link">electionTimeout</a></code></div>
<div class="col-last even-row-color">
<div class="block">The configured election timeout duration for this peer.</div>
</div>
<div class="col-first odd-row-color"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a></code></div>
<div class="col-second odd-row-color"><code><a href="#electionTimer" class="member-name-link">electionTimer</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The thread responsible for handling election timeouts.</div>
</div>
<div class="col-first even-row-color"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a></code></div>
<div class="col-second even-row-color"><code><a href="#heartBeatSender" class="member-name-link">heartBeatSender</a></code></div>
<div class="col-last even-row-color">
<div class="block">The thread responsible for sending heartbeat messages.</div>
</div>
<div class="col-first odd-row-color"><code>private final int</code></div>
<div class="col-second odd-row-color"><code><a href="#id" class="member-name-link">id</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The unique identifier for this Raft peer.</div>
</div>
<div class="col-first even-row-color"><code>private long</code></div>
<div class="col-second even-row-color"><code><a href="#lastHeartbeatTime" class="member-name-link">lastHeartbeatTime</a></code></div>
<div class="col-last even-row-color">
<div class="block">The timestamp of the last heartbeat message received.</div>
</div>
<div class="col-first odd-row-color"><code>private int</code></div>
<div class="col-second odd-row-color"><code><a href="#lastLogIndex" class="member-name-link">lastLogIndex</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The index of the last log entry.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/locks/ReentrantLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantLock</a></code></div>
<div class="col-second even-row-color"><code><a href="#lock" class="member-name-link">lock</a></code></div>
<div class="col-last even-row-color">
<div class="block">A synchronization lock for thread-safe operations.</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.logging/java/util/logging/Logger.html" title="class or interface in java.util.logging" class="external-link">Logger</a></code></div>
<div class="col-second odd-row-color"><code><a href="#logger" class="member-name-link">logger</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Constructor for RaftPeer
 port numbers are assigned sequentially to peers from id = 0 to id = num-1, so any peer
 can determine the port numbers of other peers from the give parameters</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="LogEntry.html" title="class in raft">LogEntry</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#logs" class="member-name-link">logs</a></code></div>
<div class="col-last even-row-color">
<div class="block">The list of log entries for this Raft peer.</div>
</div>
<div class="col-first odd-row-color"><code>private final int[]</code></div>
<div class="col-second odd-row-color"><code><a href="#matchIndex" class="member-name-link">matchIndex</a></code></div>
<div class="col-last odd-row-color">
<div class="block">An array tracking the highest log entry known to be replicated on each peer.</div>
</div>
<div class="col-first even-row-color"><code>private final int[]</code></div>
<div class="col-second even-row-color"><code><a href="#nextIndex" class="member-name-link">nextIndex</a></code></div>
<div class="col-last even-row-color">
<div class="block">An array tracking the next log entry to send to each peer.</div>
</div>
<div class="col-first odd-row-color"><code>private final int</code></div>
<div class="col-second odd-row-color"><code><a href="#numPeers" class="member-name-link">numPeers</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The total number of peers in the Raft cluster.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="RaftInterface.html" title="interface in raft">RaftInterface</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#peerStubs" class="member-name-link">peerStubs</a></code></div>
<div class="col-last even-row-color">
<div class="block">An array of stubs for communication with other Raft peers.</div>
</div>
<div class="col-first odd-row-color"><code>private final int</code></div>
<div class="col-second odd-row-color"><code><a href="#port" class="member-name-link">port</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The port number this Raft peer listens on.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Random.html" title="class or interface in java.util" class="external-link">Random</a></code></div>
<div class="col-second even-row-color"><code><a href="#random" class="member-name-link">random</a></code></div>
<div class="col-last even-row-color">
<div class="block">A random number generator for election timing and other randomness.</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="../remote/Service.html" title="class in remote">Service</a>&lt;<a href="RaftInterface.html" title="interface in raft">RaftInterface</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#service" class="member-name-link">service</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The service abstraction for network communication.</div>
</div>
<div class="col-first even-row-color"><code>private <a href="RaftPeer.State.html" title="enum class in raft">RaftPeer.State</a></code></div>
<div class="col-second even-row-color"><code><a href="#state" class="member-name-link">state</a></code></div>
<div class="col-last even-row-color">
<div class="block">The current state of this Raft peer (follower, candidate, or leader).</div>
</div>
<div class="col-first odd-row-color"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></code></div>
<div class="col-second odd-row-color"><code><a href="#stopElection" class="member-name-link">stopElection</a></code></div>
<div class="col-last odd-row-color">
<div class="block">A flag to stop the election process.</div>
</div>
<div class="col-first even-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></code></div>
<div class="col-second even-row-color"><code><a href="#votedFor" class="member-name-link">votedFor</a></code></div>
<div class="col-last even-row-color">
<div class="block">The peer ID that this Raft peer has voted for in the current term.</div>
</div>
<div class="col-first odd-row-color"><code>private final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></code></div>
<div class="col-second odd-row-color"><code><a href="#votes" class="member-name-link">votes</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The number of votes this Raft peer has received in the current election.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(int,int,int)" class="member-name-link">RaftPeer</a><wbr>(int&nbsp;port,
 int&nbsp;id,
 int&nbsp;num)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor for RaftPeer</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#Activate()" class="member-name-link">Activate</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Activates the Raft peer if it is not already active.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="AppendEntriesResult.html" title="class in raft">AppendEntriesResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#AppendEntries(int,int,int,int,java.util.List,int)" class="member-name-link">AppendEntries</a><wbr>(int&nbsp;term,
 int&nbsp;leaderId,
 int&nbsp;prevLogIndex,
 int&nbsp;prevLogTerm,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="LogEntry.html" title="class in raft">LogEntry</a>&gt;&nbsp;entries,
 int&nbsp;leaderCommit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handles an append entries request from the leader.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#calculatePeerPort(int)" class="member-name-link">calculatePeerPort</a><wbr>(int&nbsp;peerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Calculates the port number for a given peer ID.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkAndStartHeartbeats()" class="member-name-link">checkAndStartHeartbeats</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Ensures the initiation and continuous sending of heartbeat messages to other peers in the cluster.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#Deactivate()" class="member-name-link">Deactivate</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deactivates the Raft peer, ensuring it stops accepting remote calls and ceases its participation
 in Raft protocol processes such as elections and heartbeats.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateRandomElectionTimeout()" class="member-name-link">generateRandomElectionTimeout</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates a random election timeout duration.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#GetCommittedCmd(int)" class="member-name-link">GetCommittedCmd</a><wbr>(int&nbsp;index)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the command of the log entry at the specified index if it has been committed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="StatusReport.html" title="class in raft">StatusReport</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#GetStatus()" class="member-name-link">GetStatus</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the current status of the Raft peer, including its last log index, current term, leadership status, and the number of
 operations processed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="StatusReport.html" title="class in raft">StatusReport</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#NewCommand(int)" class="member-name-link">NewCommand</a><wbr>(int&nbsp;command)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Accepts a new command for the Raft cluster, to be appended to the log and eventually committed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#replicateEntries()" class="member-name-link">replicateEntries</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initiates the replication of new log entries to all follower peers.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="VoteResult.html" title="class in raft">VoteResult</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestVote(int)" class="member-name-link">requestVote</a><wbr>(int&nbsp;peerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends vote requests to all other nodes in the cluster.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="VoteResult.html" title="class in raft">VoteResult</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#RequestVote(int,int,int,int)" class="member-name-link">RequestVote</a><wbr>(int&nbsp;term,
 int&nbsp;candidateId,
 int&nbsp;lastLogIndex,
 int&nbsp;lastLogTerm)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handles a vote request from a candidate peer in the election process.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#requestVotes()" class="member-name-link">requestVotes</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends vote requests to all other nodes in the cluster.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetLeaderState()" class="member-name-link">resetLeaderState</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Resets the leader state for this Raft peer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sendAppendEntries(int)" class="member-name-link">sendAppendEntries</a><wbr>(int&nbsp;peerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends AppendEntries RPCs to a specific peer to replicate log entries.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sendHeartbeats(int,int)" class="member-name-link">sendHeartbeats</a><wbr>(int&nbsp;prevLogIndex,
 int&nbsp;prevLogTerm)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends heartbeat messages to all other peers in the cluster.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sendVoteRequests(int)" class="member-name-link">sendVoteRequests</a><wbr>(int&nbsp;peerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts threads to request votes from all peers except self.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startElection()" class="member-name-link">startElection</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initiates a new election round.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startElectionTimer()" class="member-name-link">startElectionTimer</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts the election timer that triggers a new election if it expires without receiving heartbeats from the leader.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateCommitIndex()" class="member-name-link">updateCommitIndex</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the commit index after successfully replicating log entries to a majority of peers.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="logger">
<h3>logger</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.logging/java/util/logging/Logger.html" title="class or interface in java.util.logging" class="external-link">Logger</a></span>&nbsp;<span class="element-name">logger</span></div>
<div class="block">Constructor for RaftPeer
 port numbers are assigned sequentially to peers from id = 0 to id = num-1, so any peer
 can determine the port numbers of other peers from the give parameters</div>
</section>
</li>
<li>
<section class="detail" id="port">
<h3>port</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">port</span></div>
<div class="block">The port number this Raft peer listens on.</div>
</section>
</li>
<li>
<section class="detail" id="id">
<h3>id</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">id</span></div>
<div class="block">The unique identifier for this Raft peer.</div>
</section>
</li>
<li>
<section class="detail" id="numPeers">
<h3>numPeers</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">numPeers</span></div>
<div class="block">The total number of peers in the Raft cluster.</div>
</section>
</li>
<li>
<section class="detail" id="service">
<h3>service</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="../remote/Service.html" title="class in remote">Service</a>&lt;<a href="RaftInterface.html" title="interface in raft">RaftInterface</a>&gt;</span>&nbsp;<span class="element-name">service</span></div>
<div class="block">The service abstraction for network communication.</div>
</section>
</li>
<li>
<section class="detail" id="peerStubs">
<h3>peerStubs</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="RaftInterface.html" title="interface in raft">RaftInterface</a>[]</span>&nbsp;<span class="element-name">peerStubs</span></div>
<div class="block">An array of stubs for communication with other Raft peers.</div>
</section>
</li>
<li>
<section class="detail" id="alive">
<h3>alive</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></span>&nbsp;<span class="element-name">alive</span></div>
<div class="block">Indicates whether the Raft peer is alive and participating in the cluster.</div>
</section>
</li>
<li>
<section class="detail" id="currentTerm">
<h3>currentTerm</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></span>&nbsp;<span class="element-name">currentTerm</span></div>
<div class="block">The current term of this Raft peer.</div>
</section>
</li>
<li>
<section class="detail" id="lock">
<h3>lock</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/locks/ReentrantLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantLock</a></span>&nbsp;<span class="element-name">lock</span></div>
<div class="block">A synchronization lock for thread-safe operations.</div>
</section>
</li>
<li>
<section class="detail" id="nextIndex">
<h3>nextIndex</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">nextIndex</span></div>
<div class="block">An array tracking the next log entry to send to each peer.</div>
</section>
</li>
<li>
<section class="detail" id="matchIndex">
<h3>matchIndex</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">matchIndex</span></div>
<div class="block">An array tracking the highest log entry known to be replicated on each peer.</div>
</section>
</li>
<li>
<section class="detail" id="lastLogIndex">
<h3>lastLogIndex</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">lastLogIndex</span></div>
<div class="block">The index of the last log entry.</div>
</section>
</li>
<li>
<section class="detail" id="votedFor">
<h3>votedFor</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></span>&nbsp;<span class="element-name">votedFor</span></div>
<div class="block">The peer ID that this Raft peer has voted for in the current term.</div>
</section>
</li>
<li>
<section class="detail" id="random">
<h3>random</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Random.html" title="class or interface in java.util" class="external-link">Random</a></span>&nbsp;<span class="element-name">random</span></div>
<div class="block">A random number generator for election timing and other randomness.</div>
</section>
</li>
<li>
<section class="detail" id="electionTimeout">
<h3>electionTimeout</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">electionTimeout</span></div>
<div class="block">The configured election timeout duration for this peer.</div>
</section>
</li>
<li>
<section class="detail" id="lastHeartbeatTime">
<h3>lastHeartbeatTime</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">lastHeartbeatTime</span></div>
<div class="block">The timestamp of the last heartbeat message received.</div>
</section>
</li>
<li>
<section class="detail" id="electionStartTime">
<h3>electionStartTime</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">electionStartTime</span></div>
<div class="block">The time at which the current election started.</div>
</section>
</li>
<li>
<section class="detail" id="votes">
<h3>votes</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicInteger</a></span>&nbsp;<span class="element-name">votes</span></div>
<div class="block">The number of votes this Raft peer has received in the current election.</div>
</section>
</li>
<li>
<section class="detail" id="stopElection">
<h3>stopElection</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicBoolean.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicBoolean</a></span>&nbsp;<span class="element-name">stopElection</span></div>
<div class="block">A flag to stop the election process.</div>
</section>
</li>
<li>
<section class="detail" id="state">
<h3>state</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type"><a href="RaftPeer.State.html" title="enum class in raft">RaftPeer.State</a></span>&nbsp;<span class="element-name">state</span></div>
<div class="block">The current state of this Raft peer (follower, candidate, or leader).</div>
</section>
</li>
<li>
<section class="detail" id="electionTimer">
<h3>electionTimer</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a></span>&nbsp;<span class="element-name">electionTimer</span></div>
<div class="block">The thread responsible for handling election timeouts.</div>
</section>
</li>
<li>
<section class="detail" id="heartBeatSender">
<h3>heartBeatSender</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a></span>&nbsp;<span class="element-name">heartBeatSender</span></div>
<div class="block">The thread responsible for sending heartbeat messages.</div>
</section>
</li>
<li>
<section class="detail" id="logs">
<h3>logs</h3>
<div class="member-signature"><span class="modifiers">private final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="LogEntry.html" title="class in raft">LogEntry</a>&gt;</span>&nbsp;<span class="element-name">logs</span></div>
<div class="block">The list of log entries for this Raft peer.</div>
</section>
</li>
<li>
<section class="detail" id="commitIndex">
<h3>commitIndex</h3>
<div class="member-signature"><span class="modifiers">private volatile</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">commitIndex</span></div>
<div class="block">The index of the highest log entry known to be committed.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(int,int,int)">
<h3>RaftPeer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">RaftPeer</span><wbr><span class="parameters">(int&nbsp;port,
 int&nbsp;id,
 int&nbsp;num)</span></div>
<div class="block">Constructor for RaftPeer</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>port</code> - peer's service port number</dd>
<dd><code>id</code> - peer's id/index among peers</dd>
<dd><code>num</code> - number of peers in the system
 <p>
 port numbers are assigned sequentially to peers from id = 0 to id = num-1, so any peer
 can determine the port numbers of other peers from the give parameters</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="resetLeaderState()">
<h3>resetLeaderState</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">resetLeaderState</span>()</div>
<div class="block">Resets the leader state for this Raft peer.
 <p>
 This method is used to reset the leader's index tracking for each peer in the cluster. It sets each peer's nextIndex to the
 current log size plus one, indicating the next log entry to send to that peer, and resets each peer's matchIndex to 0, indicating
 the highest log entry known to be replicated on that peer. This method is typically called during a new leader election or when
 the leadership changes.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="calculatePeerPort(int)">
<h3>calculatePeerPort</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">calculatePeerPort</span><wbr><span class="parameters">(int&nbsp;peerId)</span></div>
<div class="block">Calculates the port number for a given peer ID.
 <p>
 This method computes the port number used to communicate with a peer based on its ID. It utilizes the initial port number and ID
 of this peer, adjusting them to match the target peer's port. This calculation ensures that each peer can dynamically determine the
 port numbers for communicating with all other peers in the cluster, assuming sequential port assignments starting from the initial
 peer (ID 0).
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - the ID of the peer for which the port number is calculated.</dd>
<dt>Returns:</dt>
<dd>the port number for the specified peer.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="Activate()">
<h3>Activate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">Activate</span>()</div>
<div class="block">Activates the Raft peer if it is not already active. This involves setting the peer's alive status to true,
 starting the service associated with the peer, recording the current time as the last heartbeat time,
 and ensuring that the election timer is running. If the election timer is not alive, it starts a new election
 timer thread. Logs the activation event.
 This method is designed to be called when a Raft peer needs to be brought up from an inactive state,
 ensuring it begins participating in the Raft protocol processes, such as elections and log replication.</div>
</section>
</li>
<li>
<section class="detail" id="checkAndStartHeartbeats()">
<h3>checkAndStartHeartbeats</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkAndStartHeartbeats</span>()</div>
<div class="block">Ensures the initiation and continuous sending of heartbeat messages to other peers in the cluster.
 <p>
 This method checks if the current Raft peer is the leader and, if so, starts a background thread (if not already running)
 dedicated to sending heartbeat messages. These heartbeats are crucial for maintaining the leader's authority and preventing
 unnecessary elections in a stable cluster. The method dynamically calculates the previous log index and term to include
 in heartbeat messages, ensuring peers are up-to-date or can request missing log entries.
 </p>
 <p>
 The heartbeat sending thread operates as long as the peer remains alive, is the leader, and the thread is not interrupted.
 It sends heartbeats at regular intervals and ensures any active child threads for individual heartbeat messages are
 properly managed and terminated if necessary. This method plays a critical role in the Raft consensus algorithm by
 facilitating consistent state and leadership across the cluster.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="Deactivate()">
<h3>Deactivate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">Deactivate</span>()</div>
<div class="block">Deactivates the Raft peer, ensuring it stops accepting remote calls and ceases its participation
 in Raft protocol processes such as elections and heartbeats. This method performs several key actions:
 logs the intention to deactivate, stops the service associated with the peer, sets the peer's alive
 status to false, interrupts and joins the heartbeat sender and election timer threads (if they are running),
 and logs the completion of the deactivation process.

 This method is designed to be called when the Raft peer needs to be gracefully shut down or temporarily
 removed from the cluster's operations, allowing for a clean transition out of the active state.</div>
</section>
</li>
<li>
<section class="detail" id="RequestVote(int,int,int,int)">
<h3>RequestVote</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="VoteResult.html" title="class in raft">VoteResult</a></span>&nbsp;<span class="element-name">RequestVote</span><wbr><span class="parameters">(int&nbsp;term,
 int&nbsp;candidateId,
 int&nbsp;lastLogIndex,
 int&nbsp;lastLogTerm)</span>
                       throws <span class="exceptions"><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></span></div>
<div class="block">Handles a vote request from a candidate peer in the election process.
 <p>
 This method processes a vote request according to the Raft election protocol. It evaluates the candidate's term, log index,
 and log term against its own to decide whether to grant or deny the vote. Votes are granted based on the recency of the
 candidate's log and the voter's current state, including its current term and whether it has already voted in the current term.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="RaftInterface.html#RequestVote(int,int,int,int)">RequestVote</a></code>&nbsp;in interface&nbsp;<code><a href="RaftInterface.html" title="interface in raft">RaftInterface</a></code></dd>
<dt>Parameters:</dt>
<dd><code>term</code> - the candidate's current term</dd>
<dd><code>candidateId</code> - the requesting candidate's ID</dd>
<dd><code>lastLogIndex</code> - the index of the candidate's last log entry</dd>
<dd><code>lastLogTerm</code> - the term of the candidate's last log entry</dd>
<dt>Returns:</dt>
<dd>a <a href="VoteResult.html" title="class in raft"><code>VoteResult</code></a> object containing the current term and a boolean indicating whether the vote was granted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></code> - if a remote operation fails</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="AppendEntries(int,int,int,int,java.util.List,int)">
<h3>AppendEntries</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="AppendEntriesResult.html" title="class in raft">AppendEntriesResult</a></span>&nbsp;<span class="element-name">AppendEntries</span><wbr><span class="parameters">(int&nbsp;term,
 int&nbsp;leaderId,
 int&nbsp;prevLogIndex,
 int&nbsp;prevLogTerm,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="LogEntry.html" title="class in raft">LogEntry</a>&gt;&nbsp;entries,
 int&nbsp;leaderCommit)</span>
                                  throws <span class="exceptions"><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></span></div>
<div class="block">Handles an append entries request from the leader. This method is used both for replicating log entries and as a heartbeat mechanism.
 <p>
 This method processes the append entries RPC from the leader. It checks the term to ensure the request comes from a current leader
 and verifies the log consistency before appending any new entries. If the term of the request is greater than the current term of
 this peer, it updates its term and transitions to the follower state. This method also handles updating the peer's log based on the
 entries provided in the RPC, ensuring that only new and consistent entries are appended. Finally, it updates the commit index if the
 leader's commit index is greater than the current commit index of this peer.
 </p>
 <p>
 The method returns a result indicating whether the append operation was successful and the current term of this peer, which helps
 the leader maintain an up-to-date view of the state of each peer in the cluster.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="RaftInterface.html#AppendEntries(int,int,int,int,java.util.List,int)">AppendEntries</a></code>&nbsp;in interface&nbsp;<code><a href="RaftInterface.html" title="interface in raft">RaftInterface</a></code></dd>
<dt>Parameters:</dt>
<dd><code>term</code> - the leader's current term</dd>
<dd><code>leaderId</code> - the ID of the leader sending this append entry request</dd>
<dd><code>prevLogIndex</code> - the index of the log entry immediately preceding the new ones</dd>
<dd><code>prevLogTerm</code> - the term of the log entry immediately preceding the new ones</dd>
<dd><code>entries</code> - the list of log entries to append to the local log</dd>
<dd><code>leaderCommit</code> - the leader's commit index</dd>
<dt>Returns:</dt>
<dd>an <a href="AppendEntriesResult.html" title="class in raft"><code>AppendEntriesResult</code></a> object containing the current term of this peer and a boolean indicating whether the append was successful.</dd>
<dt>Throws:</dt>
<dd><code><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></code> - if a remote operation fails</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="GetCommittedCmd(int)">
<h3>GetCommittedCmd</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">GetCommittedCmd</span><wbr><span class="parameters">(int&nbsp;index)</span>
                    throws <span class="exceptions"><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></span></div>
<div class="block">Retrieves the command of the log entry at the specified index if it has been committed.
 <p>
 This method is used to fetch the command stored in a committed log entry based on its index. It checks if the requested index is
 within the bounds of committed entries and returns the command if it exists. If the index is out of range or refers to an uncommitted
 entry, the method returns 0 to indicate the absence of a valid command. This operation helps ensure that only committed commands are
 executed or queried, maintaining the consistency and integrity of the state machine.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="RaftInterface.html#GetCommittedCmd(int)">GetCommittedCmd</a></code>&nbsp;in interface&nbsp;<code><a href="RaftInterface.html" title="interface in raft">RaftInterface</a></code></dd>
<dt>Parameters:</dt>
<dd><code>index</code> - the index of the log entry whose command is to be retrieved.</dd>
<dt>Returns:</dt>
<dd>the command of the specified log entry if committed, or 0 if the index is invalid or refers to an uncommitted entry.</dd>
<dt>Throws:</dt>
<dd><code><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></code> - if a remote operation fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="GetStatus()">
<h3>GetStatus</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="StatusReport.html" title="class in raft">StatusReport</a></span>&nbsp;<span class="element-name">GetStatus</span>()
                       throws <span class="exceptions"><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></span></div>
<div class="block">Retrieves the current status of the Raft peer, including its last log index, current term, leadership status, and the number of
 operations processed.
 <p>
 This method provides a snapshot of the peer's status, which includes critical information such as its last log index, current term,
 whether it is the leader, and the count of operations it has processed. This information is crucial for monitoring and debugging
 purposes, allowing for an understanding of the peer's role in the cluster and its activity level. The method returns a default status
 report indicating the peer is deactivated if it is not alive.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="RaftInterface.html#GetStatus()">GetStatus</a></code>&nbsp;in interface&nbsp;<code><a href="RaftInterface.html" title="interface in raft">RaftInterface</a></code></dd>
<dt>Returns:</dt>
<dd>a <a href="StatusReport.html" title="class in raft"><code>StatusReport</code></a> object containing the peer's last log index, current term, leadership status, and operation count.</dd>
<dt>Throws:</dt>
<dd><code><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></code> - if a remote operation fails.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="NewCommand(int)">
<h3>NewCommand</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="StatusReport.html" title="class in raft">StatusReport</a></span>&nbsp;<span class="element-name">NewCommand</span><wbr><span class="parameters">(int&nbsp;command)</span>
                        throws <span class="exceptions"><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></span></div>
<div class="block">Accepts a new command for the Raft cluster, to be appended to the log and eventually committed.
 <p>
 This method is responsible for handling new commands when the current peer is the leader. It appends a new log entry with the
 command to the log and attempts to replicate this entry to the follower peers. The method ensures that new commands are only
 accepted by the leader, throwing an exception if called on a follower or candidate.
 </p>
 <p>
 After appending the command, the method triggers log entry replication to followers and returns the current status of the leader,
 including the latest log index and term.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="RaftInterface.html#NewCommand(int)">NewCommand</a></code>&nbsp;in interface&nbsp;<code><a href="RaftInterface.html" title="interface in raft">RaftInterface</a></code></dd>
<dt>Parameters:</dt>
<dd><code>command</code> - the command to be added to the log.</dd>
<dt>Returns:</dt>
<dd>a <a href="StatusReport.html" title="class in raft"><code>StatusReport</code></a> indicating the leader's status after attempting to append and replicate the new command.</dd>
<dt>Throws:</dt>
<dd><code><a href="../remote/RemoteObjectException.html" title="class in remote">RemoteObjectException</a></code> - if a remote operation fails or if the method is called on a non-leader peer.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="replicateEntries()">
<h3>replicateEntries</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">replicateEntries</span>()</div>
<div class="block">Initiates the replication of new log entries to all follower peers.
 <p>
 This private helper method is called by the leader after a new command is added to its log. It creates and starts threads for each
 follower to send the AppendEntries RPC, ensuring the new log entries are replicated across the cluster. This method plays a crucial
 role in maintaining log consistency and ensuring that all committed entries are eventually replicated to all peers.
 </p>
 <p>
 The method waits for all replication threads to complete before returning, allowing the leader to subsequently check if the new
 entries have been sufficiently replicated for them to be committed.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="sendAppendEntries(int)">
<h3>sendAppendEntries</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">sendAppendEntries</span><wbr><span class="parameters">(int&nbsp;peerId)</span></div>
<div class="block">Sends AppendEntries RPCs to a specific peer to replicate log entries.
 <p>
 This internal method is used by the leader to replicate its log entries to a follower identified by `peerId`. It handles the
 logic for determining which log entries need to be sent based on the follower's progress and retries in case of failures. The
 method adjusts the nextIndex and matchIndex for the follower based on the success or failure of the AppendEntries RPCs.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>peerId</code> - the ID of the peer to which log entries are being replicated.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateCommitIndex()">
<h3>updateCommitIndex</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateCommitIndex</span>()</div>
<div class="block">Updates the commit index after successfully replicating log entries to a majority of peers.
 <p>
 This method evaluates the replication progress (matchIndex) for each peer and updates the commit index of the leader if it
 finds that a majority of peers have replicated entries up to a new index. This ensures that commands are committed in a
 safe manner, respecting the Raft commitment rule.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="startElectionTimer()">
<h3>startElectionTimer</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startElectionTimer</span>()</div>
<div class="block">Starts the election timer that triggers a new election if it expires without receiving heartbeats from the leader.
 <p>
 This method runs in a loop, constantly resetting the election timer to a random value within a specified range. If the timer
 expires (i.e., no heartbeat is received within the timeout period), and this node is not already a leader, it initiates an
 election by transitioning to the candidate state and starting the vote request process.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="startElection()">
<h3>startElection</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startElection</span>()</div>
<div class="block">Initiates a new election round.
 <p>
 This method is called when the election timer expires without receiving a heartbeat. It increments the current term, votes for
 itself, and transitions to the candidate state. Subsequently, it sends RequestVote RPCs to all other peers in the cluster to
 gather votes.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="requestVotes()">
<h3>requestVotes</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">requestVotes</span>()</div>
<div class="block">Sends vote requests to all other nodes in the cluster.
 <p>
 This method is invoked to request votes from all other peers during an election. It creates and starts separate threads for each
 vote request to ensure that vote solicitation happens in parallel, allowing the node to potentially gather votes more quickly.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="sendVoteRequests(int)">
<h3>sendVoteRequests</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">sendVoteRequests</span><wbr><span class="parameters">(int&nbsp;peerId)</span></div>
<div class="block">Starts threads to request votes from all peers except self.</div>
</section>
</li>
<li>
<section class="detail" id="sendHeartbeats(int,int)">
<h3>sendHeartbeats</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>[]</span>&nbsp;<span class="element-name">sendHeartbeats</span><wbr><span class="parameters">(int&nbsp;prevLogIndex,
 int&nbsp;prevLogTerm)</span></div>
<div class="block">Sends heartbeat messages to all other peers in the cluster.
 <p>
 This method is utilized by the leader to maintain its authority and prevent followers from starting new elections. It sends
 an AppendEntries RPC with no log entries (empty list) to each peer, which serves as a heartbeat. The method handles the
 response from each peer to possibly update the leader's term and step down if a higher term is discovered. This is critical
 for maintaining the health of the cluster and ensuring only one leader exists per term.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>prevLogIndex</code> - the index of the log entry immediately preceding the new one.</dd>
<dd><code>prevLogTerm</code> - the term of the log entry immediately preceding the new one.</dd>
<dt>Returns:</dt>
<dd>an array of threads, each responsible for sending heartbeats to a different peer.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="requestVote(int)">
<h3>requestVote</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="VoteResult.html" title="class in raft">VoteResult</a></span>&nbsp;<span class="element-name">requestVote</span><wbr><span class="parameters">(int&nbsp;peerId)</span></div>
<div class="block">Sends vote requests to all other nodes in the cluster.
 <p>
 This method is invoked to request votes from all other peers during an election. It creates and starts separate threads for each
 vote request to ensure that vote solicitation happens in parallel, allowing the node to potentially gather votes more quickly.
 </p></div>
</section>
</li>
<li>
<section class="detail" id="generateRandomElectionTimeout()">
<h3>generateRandomElectionTimeout</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">generateRandomElectionTimeout</span>()</div>
<div class="block">Generates a random election timeout duration.
 <p>
 This method returns a random election timeout within a predefined range. This randomness helps to ensure that split votes are
 less likely by staggering the time nodes become candidates and start elections.
 </p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a random election timeout duration in milliseconds.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
